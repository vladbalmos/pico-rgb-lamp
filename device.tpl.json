{
    "id": "RGB_MQTT_LAMP_001",
    "name": "RGB MQTT Lamp",
    "ssid": "wifi SSID",
    "password": "wifi password",
    "server": "ip or domain of MQTT server",
    "led_pins": [
        [1, 2, 0],
        [4, 5, 3],
        [7, 8, 6],
        [10, 11, 9]
    ],
    "invert_pwm_duty_cycle": true,
    "config": {
        "fft_stream_host": null,
        "fft_stream_port": null
    },
    "features": [
        {
            "name": "Change global color",
            "id": "change_global_color",
            "schema": {
                "type": "color",
                "default": "#ff0000"
            }
        },
        {
            "name": "Change LED 0 color",
            "id": "change_led0_color",
            "schema": {
                "type": "color",
                "default": "#ff0000"
            }
        },
        {
            "name": "Change LED 1 color",
            "id": "change_led1_color",
            "schema": {
                "type": "color",
                "default": "#ff0000"
            }
        },
        {
            "name": "Change LED 2 color",
            "id": "change_led2_color",
            "schema": {
                "type": "color",
                "default": "#ff0000"
            }
        },
        {
            "name": "Change LED 3 color",
            "id": "change_led3_color",
            "schema": {
                "type": "color",
                "default": "#ff0000"
            }
        },
        {
            "name": "Enable audio visualizer",
            "id": "enable_audio_visualizer",
            "schema": {
                "type": "boolean",
                "default": false
            }
        },
        {
            "name": "Audio visualizer configuration",
            "id": "audio_visualizer_config",
            "schema": {
                "type": "json",
                "default": {
                    "dbfs": {
                        "min": -27,
                        "max": 0,
                        "exponent": 2
                    },
                    "loudness_functions": [
                        {
                            "name": "random_frequency",
                            "eval": "amplitudes[random.randint(0, len(amplitudes) - 1)]"
                        },
                        {
                            "name": "sum",
                            "eval": "sum(amplitudes)"
                        },
                        {
                            "name": "max",
                            "eval": "max(amplitudes)"
                        },
                        {
                            "name": "min",
                            "eval": "min(amplitudes)"
                        },
                        {
                            "name": "avg",
                            "eval": "sum(amplitudes) / len(amplitudes)"
                        }
                    ],
                    "styles": [
                        {
                            "name": "rgb_to_max_base_min_med_avg_high",
                            "channels": {
                                "red": [
                                    "max",
                                    "amplitudes[0:3]"
                                ],
                                "green": [
                                    "min",
                                    "amplitudes[3:7]"
                                ],
                                "blue": [
                                    "avg",
                                    "amplitudes[7:]"
                                ]
                            }
                        },
                        {
                            "name": "rgb_to_rand_base_med_high",
                            "channels": {
                                "red": [
                                    "rand_loudness",
                                    "amplitudes[0:3]"
                                ],
                                "green": [
                                    "rand_loudness",
                                    "amplitudes[3:7]"
                                ],
                                "blue": [
                                    "rand_loudness",
                                    "amplitudes[7:]"
                                ]
                            }
                        }
                    ],
                    "active_style": "rgb_to_max_base_min_med_avg_high"
                }
            }
        },
        {
            "name": "Animation",
            "id": "animation",
            "schema": {
                "type": "list",
                "item": "string",
                "valid_values": [
                    "off",
                    "breathe",
                    "wheel",
                    "rainbow"
                ],
                "default": "off"
            }
        }
    ],
    "topics": {
        "subscription": {
            "manager": "acme/devices/request",
            "lighting": "acme/devices/lighting",
            "device": "acme/devices/lighting/name-of-device/request"
        },
        "publish": {
            "manager": "acme/devices/response",
            "device": "acme/devices/lighting/name-of-device/response"
        }
    }
}